<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Title -->
  <title>{{ seo_title|default('M·ª•n D·ª´a Ho√†ng Hi·∫øu ‚Äì Gi√° Th·ªÉ S·∫°ch ‚Äì NƒÉng Su·∫•t V∆∞·ª£t Tr·ªôi') }}</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="{{ seo_description|default('M·ª•n D·ª´a Ho√†ng Hi·∫øu cung c·∫•p m·ª•n d·ª´a x·ª≠ l√Ω s·∫°ch, EC th·∫•p, pH chu·∫©n, kh√¥ng tannin ‚Äì ph√π h·ª£p d∆∞a l∆∞·ªõi, d√¢u t√¢y, ·ªõt chu√¥ng, lan v√† nhi·ªÅu m√¥ h√¨nh n√¥ng nghi·ªáp s·∫°ch.') }}">
  <meta name="keywords" content="m·ª•n d·ª´a, m·ª•n d·ª´a x·ª≠ l√Ω, gi√° th·ªÉ s·∫°ch, gi√° th·ªÉ m·ª•n d·ª´a, d∆∞a l∆∞·ªõi gi√° th·ªÉ, d√¢u t√¢y gi√° th·ªÉ, ·ªõt chu√¥ng gi√° th·ªÉ">
  <meta name="author" content="M·ª•n D·ª´a Ho√†ng Hi·∫øu">
  
  <!-- Open Graph Meta Tags for Social Sharing -->
  <meta property="og:title" content="{{ seo_title|default('M·ª•n D·ª´a Ho√†ng Hi·∫øu ‚Äì Gi√° Th·ªÉ S·∫°ch ‚Äì Kh√¥ng Tannin') }}">
  <meta property="og:description" content="{{ seo_description|default('C∆° s·ªü s·∫£n xu·∫•t m·ª•n d·ª´a s·∫°ch, EC th·∫•p, pH chu·∫©n, ph√π h·ª£p tr·ªìng rau, tr√°i v√† hoa ki·ªÉng.') }}">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ current_url|default('https://munduahoanghieu.com' ~ currentPath|default('')) }}">
  <meta property="og:image" content="https://munduahoanghieu.com/assets/banner/cover.jpg">
  <meta property="og:locale" content="vi_VN">
  <meta property="og:site_name" content="M·ª•n D·ª´a Ho√†ng Hi·∫øu">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ seo_title|default('M·ª•n D·ª´a Ho√†ng Hi·∫øu') }}">
  <meta name="twitter:description" content="{{ seo_description|default('M·ª•n d·ª´a x·ª≠ l√Ω s·∫°ch ‚Äì chuy√™n cung c·∫•p gi√° th·ªÉ ch·∫•t l∆∞·ª£ng cao.') }}">
  <meta name="twitter:image" content="https://munduahoanghieu.com/assets/banner/cover.jpg">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{{ current_url|default('https://munduahoanghieu.com' ~ currentPath|default('')) }}">
  
  <!-- Favicons - Using original logo -->
  <link rel="icon" type="image/svg+xml" href="/assets/image/logo.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/image/logo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/image/logo.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/image/logo.png">
  <link rel="shortcut icon" href="/assets/image/logo.png">
  <link rel="icon" type="image/png" sizes="64x64" href="/assets/image/logo.png">
  <link rel="icon" type="image/png" sizes="48x48" href="/assets/image/logo.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/image/logo.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/image/logo.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/assets/image/logo512.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/image/logo512.png">
  <link rel="shortcut icon" type="image/png" href="/assets/image/logo.png" sizes="128x128">
  <link href="/styles.css" rel="stylesheet">
  <style>
    /* Global Font Size - Optimized for farmers (easy reading) */
    html {
      font-size: 17px; /* Base size for desktop */
    }
    
    /* Mobile: Slightly larger for easy reading on small screens */
    @media (max-width: 767px) {
      html {
        font-size: 15px;
      }
      
      body {
        font-size: 1rem; /* 15px */
        line-height: 1.6;
      }
      
      p, li, span {
        font-size: 1rem; /* 15px */
      }
      
      h1 { font-size: 1.75rem; } /* 26.25px */
      h2 { font-size: 1.5rem; }  /* 22.5px */
      h3 { font-size: 1.25rem; } /* 18.75px */
      h4 { font-size: 1.125rem; } /* 16.875px */
    }
    
    /* Tablet: Comfortable reading size */
    @media (min-width: 768px) and (max-width: 1023px) {
      html {
        font-size: 16px;
      }
      
      body {
        font-size: 1rem; /* 16px */
        line-height: 1.65;
      }
      
      p, li, span {
        font-size: 1rem; /* 16px */
      }
      
      h1 { font-size: 2rem; }    /* 32px */
      h2 { font-size: 1.625rem; } /* 26px */
      h3 { font-size: 1.375rem; } /* 22px */
      h4 { font-size: 1.1875rem; } /* 19px */
    }
    
    /* Desktop: Professional size with good readability */
    @media (min-width: 1024px) {
      html {
        font-size: 17px;
      }
      
      body {
        font-size: 1rem; /* 17px */
        line-height: 1.7;
      }
      
      p, li, span {
        font-size: 1rem; /* 17px */
      }
      
      h1 { font-size: 2.25rem; }  /* 38.25px */
      h2 { font-size: 1.875rem; } /* 31.875px */
      h3 { font-size: 1.5rem; }   /* 25.5px */
      h4 { font-size: 1.25rem; }  /* 21.25px */
    }
    
    /* Footer Responsive Layout */
    @media (max-width: 768px) {
      .footer-section {
        margin-bottom: 1.5rem;
      }
    }
    
    /* Footer Slogan Hover */
    .footer-slogan {
      transition: color 0.3s ease-in-out;
    }
    
    .footer-slogan:hover {
      color: #15803d;
    }
    
    /* Footer Tagline - Styled */
    .footer-tagline {
      text-align: center;
      font-style: italic;
      color: #166534;
      font-size: 14px;
      line-height: 1.6;
      margin-top: 0.5rem;
      font-weight: 500;
      letter-spacing: 0.01em;
    }
    
    .footer-tagline:hover {
      color: #15803d;
      transform: scale(1.02);
      transition: all 0.3s ease;
    }
  </style>
  {% block head %}{% endblock %}
</head>
<body class="font-sans pt-36 bg-green-50 overflow-x-hidden">
  <!-- Include Header Component -->
  {% include 'components/header.twig' %}

  <!-- Main Content -->
  <main class="overflow-x-hidden">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="bg-gradient-to-t from-green-50 via-lime-50 to-white text-gray-800 py-8 md:py-10 border-t-2 border-green-300 shadow-sm mt-12">
    <div class="max-w-6xl mx-auto px-6 md:px-12">
      <!-- Main Footer Content - 3 c·ªôt ƒë·ªÅu nhau v·ªõi gap t·ªët h∆°n -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-10 lg:gap-12 mb-8">
        
        <!-- C·ªôt 1: Logo + M√¥ T·∫£ + ƒê·ªãa Ch·ªâ -->
        <div class="pr-0 md:pr-6">
          <div class="flex items-center gap-3 mb-4">
            <img src="/assets/image/Footer/logo nho.png" alt="M·ª•n D·ª´a Ho√†ng Hi·∫øu" class="w-12 h-12 rounded-full shadow-md flex-shrink-0">
            <h3 class="text-green-700 font-bold text-lg border-b-2 border-green-600 pb-1 whitespace-nowrap">M·ª•n D·ª´a Ho√†ng Hi·∫øu</h3>
          </div>
          <div class="text-xs text-gray-600 leading-relaxed space-y-1 mb-4">
            <p class="font-medium text-green-700">Chuy√™n s·∫£n xu·∫•t v√† cung c·∫•p gi√° th·ªÉ m·ª•n d·ª´a s·∫°ch</p>
            <p>G√≥p ph·∫ßn n√¢ng cao nƒÉng su·∫•t v√† b·∫£o v·ªá m√¥i tr∆∞·ªùng.</p>
          </div>
          <div class="text-sm text-gray-700">
            <div class="flex items-start gap-2 transition-all duration-300 ease-out hover:-translate-x-[4px] hover:scale-[1.08] group cursor-pointer">
              <span class="text-amber-600 flex-shrink-0 mt-0.5">üè†</span>
              <div class="text-green-700 font-semibold">
                <span class="block">·∫§p H·ªôi An, X√£ ƒêa Ph∆∞·ªõc H·ªôi, Huy·ªán M·ªè C√†y Nam, T·ªânh B·∫øn Tre</span>
                <a href="https://www.google.com/maps/place/10%C2%B007'18.2%22N+106%C2%B019'09.3%22E/@10.1217194,106.3166822,17z/data=!3m1!4b1!4m4!3m3!8m2!3d10.1217194!4d106.3192571" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="text-blue-600 hover:text-blue-800 hover:underline text-xs mt-1 inline-block footer-glow-link">
                  üìç Xem b·∫£n ƒë·ªì
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- C·ªôt 2: Th√¥ng Tin Li√™n H·ªá -->
        <div class="pr-0 md:pr-6">
          <h4 class="text-green-700 font-semibold text-lg border-b-2 border-green-600 pb-1 mb-3 inline-block">
            Li√™n H·ªá
          </h4>
          <div class="space-y-2.5 text-sm text-gray-700">
            <div class="flex items-center gap-2 transition-all duration-300 ease-out hover:-translate-x-[4px] hover:scale-[1.08] group cursor-pointer">
              <span class="text-amber-600 text-base flex-shrink-0">‚òéÔ∏è</span>
              <span class="whitespace-nowrap">Hotline: <a href="tel:0984288512" class="text-green-700 font-semibold hover:no-underline hover:text-green-800 inline-block footer-glow-link">0984.288.512</a></span>
            </div>
            <div class="flex items-center gap-2 transition-all duration-300 ease-out hover:-translate-x-[4px] hover:scale-[1.08] group cursor-pointer">
              <span class="text-amber-600 text-base flex-shrink-0">‚úâÔ∏è</span>
              <span class="whitespace-nowrap">Email: <a href="mailto:munduahoanghieu.vn@gmail.com" class="text-green-700 font-semibold hover:no-underline hover:text-green-800 inline-block footer-glow-link">munduahoanghieu.vn@gmail.com</a></span>
            </div>
            <div class="flex items-center gap-2 transition-all duration-300 ease-out hover:-translate-x-[4px] hover:scale-[1.08] group cursor-pointer">
              <span class="text-amber-600 text-base flex-shrink-0">üåê</span>
              <span class="whitespace-nowrap">Website: <a href="https://munduahoanghieu.com" class="text-green-700 font-medium hover:no-underline hover:text-green-800 inline-block footer-glow-link" target="_blank" rel="noopener noreferrer">munduahoanghieu.com</a></span>
            </div>
          </div>
        </div>

        <!-- C·ªôt 3: M·∫°ng X√£ H·ªôi -->
        <div>
          <h4 class="text-green-700 font-semibold text-lg border-b-2 border-green-600 pb-1 mb-3 inline-block">
            M·∫°ng X√£ H·ªôi
          </h4>
          <div class="space-y-2.5">
            <a href="https://www.facebook.com/mun.dua.hoang.hieu" target="_blank" 
               class="flex items-center gap-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-x-[4px] hover:scale-[1.08] hover:no-underline group footer-social-fb" 
               title="Facebook - M·ª•n D·ª´a Ho√†ng Hi·∫øu">
              <img src="/assets/image/Footer/Face.png" alt="Facebook" class="w-6 h-6 object-contain group-hover:scale-110 transition-transform duration-300">
              <span>Facebook</span>
            </a>
            <a href="https://zalo.me/112949426040780264" target="_blank" 
               class="flex items-center gap-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-x-[4px] hover:scale-[1.08] hover:no-underline group footer-social-zalo"
               title="Zalo OA - M·ª•n D·ª´a Ho√†ng Hi·∫øu">
              <img src="/assets/image/Footer/zalo.png" alt="Zalo" class="w-6 h-6 object-contain group-hover:scale-110 transition-transform duration-300">
              <span>Zalo OA</span>
            </a>
            <a href="https://www.youtube.com/channel/UCyBxXvx4Y8SvFeFFIHQ0xqg" target="_blank" 
               class="flex items-center gap-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-x-[4px] hover:scale-[1.08] hover:no-underline group footer-social-yt"
               title="YouTube - M·ª•n D·ª´a Ho√†ng Hi·∫øu">
              <img src="/assets/image/Footer/youtube.png" alt="YouTube" class="w-6 h-6 object-contain group-hover:scale-110 transition-transform duration-300">
              <span>YouTube</span>
            </a>
          </div>
        </div>
      </div>

      <!-- Divider -->
      <div class="border-t border-green-300 my-6"></div>

      <!-- Slogan Section -->
      <div class="text-center mt-6 mb-4">
        <p class="footer-slogan text-base md:text-lg text-green-800 font-medium italic">
          üåø "Gi√° th·ªÉ s·∫°ch ‚Äì NƒÉng su·∫•t v∆∞·ª£t tr·ªôi ‚Äì ƒê·ªìng h√†nh c√πng nh√† n√¥ng" üåø
        </p>
      </div>

      <!-- Copyright -->
      <div class="text-center footer-bottom text-sm text-gray-600">
        <p class="mb-2">
          &copy; 2024 M·ª•n D·ª´a Ho√†ng Hi·∫øu. B·∫£o l∆∞u m·ªçi quy·ªÅn.
        </p>
        <p class="footer-tagline">
          L√†m b·∫±ng c·∫£ üíö ƒë·ªÉ n√¢ng t·∫ßm gi√° tr·ªã n√¥ng s·∫£n Vi·ªát üåæ
        </p>
      </div>
    </div>
  </footer>

  <!-- Footer glow effects CSS -->
  <style>
    /* Footer link glow effects */
    .footer-glow-link {
      filter: drop-shadow(0 0 0px rgba(34,197,94,0.5));
      transition: filter 0.3s ease, color 0.3s ease;
    }
    .footer-glow-link:hover {
      filter: drop-shadow(0 0 12px rgba(34,197,94,0.5));
      color: #15803d !important;
    }
    
    /* Social media colors and glows */
    .footer-social-fb {
      color: #1877F2;
      filter: drop-shadow(0 0 0px rgba(59,137,255,0.5));
      transition: all 0.3s ease;
    }
    .footer-social-fb:hover {
      color: #3b89ff;
      filter: drop-shadow(0 0 12px rgba(59,137,255,0.5));
    }
    
    .footer-social-zalo {
      color: #0068FF;
      filter: drop-shadow(0 0 0px rgba(51,144,255,0.5));
      transition: all 0.3s ease;
    }
    .footer-social-zalo:hover {
      color: #3390FF;
      filter: drop-shadow(0 0 12px rgba(51,144,255,0.5));
    }
    
    .footer-social-yt {
      color: #FF0000;
      filter: drop-shadow(0 0 0px rgba(255,51,51,0.55));
      transition: all 0.3s ease;
    }
    .footer-social-yt:hover {
      color: #FF3333;
      filter: drop-shadow(0 0 12px rgba(255,51,51,0.55));
    }
  </style>
  
  <!-- Global JavaScript - Must be after body elements are loaded -->
  <script>
    console.log('üü¢ LAYOUT.TWIG SCRIPT START');
    
    // Cache input references
    let cachedDesktopInput = null;
    let cachedMobileInput = null;
    
    // Search functionality - redirect to search page
    function performSearch() {
      try {
        console.log('üîç performSearch() called (button click)');
        
        // Try all methods to get input
        let searchInput = cachedDesktopInput || cachedMobileInput;
        console.log('Cached inputs - Desktop:', cachedDesktopInput, 'Mobile:', cachedMobileInput);
        
        // If cache is null, try to get fresh
        if (!searchInput) {
          console.log('Cache empty, querying DOM...');
          searchInput = document.getElementById('search-input') || document.getElementById('search-input-mobile');
          console.log('DOM query result:', searchInput);
        }
        
        if (!searchInput) {
          console.error('‚ùå Kh√¥ng t√¨m th·∫•y input search b·∫±ng ID!');
          
          // Last resort: try querySelectorAll
          const allInputs = document.querySelectorAll('input[type="text"]');
          console.log('All text inputs found:', allInputs.length);
          
          // Find input near the button that was clicked
          for (let inp of allInputs) {
            console.log('Checking input:', inp.id, inp.placeholder, inp.value);
            if (inp.placeholder && inp.placeholder.includes('T√¨m')) {
              searchInput = inp;
              console.log('‚úÖ Found search input by placeholder:', inp);
              break;
            }
          }
          
          if (!searchInput && allInputs.length > 0) {
            // Try to find any input with value
            for (let inp of allInputs) {
              if (inp.value.trim()) {
                searchInput = inp;
                console.log('‚úÖ Using input with value:', inp);
                break;
              }
            }
          }
          
          if (!searchInput) {
            alert('L·ªói: Kh√¥ng t√¨m th·∫•y √¥ t√¨m ki·∫øm. Vui l√≤ng t·∫£i l·∫°i trang.');
            return;
          }
        }
        
        const query = searchInput.value.trim();
        console.log('Search query:', query, 'length:', query.length);
        
        if (!query || query.length < 2) {
          alert('Vui l√≤ng nh·∫≠p √≠t nh·∫•t 2 k√Ω t·ª± ƒë·ªÉ t√¨m ki·∫øm');
          return;
        }
        
        // Redirect to search page
        console.log('üöÄ Redirecting to /search?q=' + query);
        window.location.href = `/search?q=${encodeURIComponent(query)}`;
      } catch (error) {
        console.error('‚ùå Error in performSearch:', error);
        alert('C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.');
      }
    }
    
    console.log('üü¢ performSearch() defined');

    console.log('üü¢ performSearch() defined');

    function handleSearchKeyPress(event) {
      if (event.key === 'Enter') {
        event.preventDefault();
        // Pass the input element from event
        const inputElement = event.target;
        console.log('Enter pressed on input:', inputElement);
        console.log('Input value from event:', inputElement.value);
        performSearchWithInput(inputElement);
      }
    }
    
    // Wrapper that accepts input element directly
    function performSearchWithInput(inputElement) {
      try {
        console.log('üîç performSearchWithInput() called');
        console.log('Input element received:', inputElement);
        
        if (!inputElement) {
          console.error('‚ùå No input element provided');
          performSearch(); // Fallback to original
          return;
        }
        
        const query = inputElement.value.trim();
        console.log('Search query:', query);
        
        if (!query || query.length < 2) {
          alert('Vui l√≤ng nh·∫≠p √≠t nh·∫•t 2 k√Ω t·ª± ƒë·ªÉ t√¨m ki·∫øm');
          return;
        }
        
        // Redirect to search page
        console.log('üöÄ Redirecting to /search?q=' + query);
        window.location.href = `/search?q=${encodeURIComponent(query)}`;
      } catch (error) {
        console.error('‚ùå Error in performSearchWithInput:', error);
        alert('C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.');
      }
    }
    
    console.log('üü¢ handleSearchKeyPress() defined');
    
    // Wait for DOM to be fully loaded before attaching listeners
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initSearchListeners);
    } else {
      // DOM already loaded
      initSearchListeners();
    }
    
    function initSearchListeners() {
      // Attach event listeners after DOM is ready
      try {
        console.log('üîß Attaching search event listeners...');
        
        // Desktop search input and button
        cachedDesktopInput = document.getElementById('search-input');
        const desktopBtn = document.getElementById('search-btn-desktop');
        
        if (cachedDesktopInput) {
          console.log('‚úÖ Desktop input found and cached');
          cachedDesktopInput.addEventListener('keypress', handleSearchKeyPress);
        } else {
          console.warn('‚ö†Ô∏è Desktop search input not found');
        }
        
        if (desktopBtn) {
          desktopBtn.addEventListener('click', performSearch);
          console.log('‚úÖ Desktop search button listener attached');
        } else {
          console.warn('‚ö†Ô∏è Desktop search button not found');
        }
        
        // Mobile search input and button
        cachedMobileInput = document.getElementById('search-input-mobile');
        const mobileBtn = document.getElementById('search-btn-mobile');
        
        if (cachedMobileInput) {
          console.log('‚úÖ Mobile input found and cached');
          cachedMobileInput.addEventListener('keypress', handleSearchKeyPress);
        } else {
          console.warn('‚ö†Ô∏è Mobile search input not found');
        }
        
        if (mobileBtn) {
          mobileBtn.addEventListener('click', performSearch);
          console.log('‚úÖ Mobile search button listener attached');
        } else {
          console.warn('‚ö†Ô∏è Mobile search button not found');
        }
        
        console.log('üü¢ Event listeners setup complete');
      } catch (error) {
        console.error('‚ùå Error attaching event listeners:', error);
      }
    }

    // Email functionality
    function sendEmail() {
      const subject = encodeURIComponent('T∆∞ v·∫•n s·∫£n ph·∫©m m·ª•n d·ª´a');
      const body = encodeURIComponent(`Xin ch√†o M·ª•n D·ª´a Ho√†ng Hi·∫øu,

T√¥i quan t√¢m ƒë·∫øn c√°c s·∫£n ph·∫©m m·ª•n d·ª´a c·ªßa c√¥ng ty. Xin vui l√≤ng t∆∞ v·∫•n cho t√¥i v·ªÅ:
- S·∫£n ph·∫©m ph√π h·ª£p cho c√¢y tr·ªìng c·ªßa t√¥i
- Gi√° c·∫£ v√† ch√≠nh s√°ch giao h√†ng
- H·ªó tr·ª£ k·ªπ thu·∫≠t

C·∫£m ∆°n!`);
      
      window.open(`mailto:munduahoanghieu.vn@gmail.com?subject=${subject}&body=${body}`);
    }
    
    console.log('üü¢ LAYOUT.TWIG SCRIPT END');
  </script>
  
  {% block scripts %}{% endblock %}
</body>
</html>