<section class="py-20 bg-gray-50">
    <div class="container mx-auto px-4 md:px-8 max-w-7xl">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-green-700 mb-4 font-signature">Hình Ảnh & Kết Quả</h2>
            <p class="text-gray-600">Những hình ảnh thực tế từ xưởng sản xuất và vườn của khách hàng</p>
        </div>

        <!-- Tabs Navigation -->
        <div class="flex justify-center mb-12">
            <div class="bg-white rounded-full shadow-sm p-1.5 border border-gray-100 inline-flex">
                <button data-gallery="products" class="gallery-tab px-8 py-2.5 rounded-full font-medium transition-all duration-300 bg-green-600 text-white shadow-md" id="tab-products">Sản Phẩm</button>
                <button data-gallery="results" class="gallery-tab px-8 py-2.5 rounded-full text-gray-600 hover:text-green-700 font-medium transition-all duration-300 hover:bg-gray-50" id="tab-results">Kết Quả</button>
            </div>
        </div>

        <!-- Gallery Content -->
        <div class="relative min-h-[400px]">
            <!-- Products Gallery -->
            <div id="gallery-products" class="gallery-content grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 animate-fade-in">
                {% if content.gallery and content.gallery.products %}
                    {% for item in content.gallery.products %}
                    <div class="group relative overflow-hidden rounded-xl shadow-sm aspect-square cursor-pointer">
                        <img src="{{ item.image }}" alt="{{ item.alt }}" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700" loading="lazy" onerror="this.style.display='none'">

                        <!-- Hover Overlay -->
                        <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                            <p class="text-white font-medium transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300">{{ item.caption }}</p>
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}
            </div>

            <!-- Results Gallery -->
            <div id="gallery-results" class="gallery-content grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 hidden animate-fade-in">
                {% if content.gallery and content.gallery.results %}
                    {% for item in content.gallery.results %}
                    <div class="group relative overflow-hidden rounded-xl shadow-sm aspect-square cursor-pointer">
                        <img src="{{ item.image }}" alt="{{ item.alt }}" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700" loading="lazy" onerror="this.style.display='none'">
                         <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                            <p class="text-white font-medium transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300">{{ item.caption }}</p>
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.gallery-tab');
            const contents = document.querySelectorAll('.gallery-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const target = this.dataset.gallery;

                    // Update tabs styling
                    tabs.forEach(t => {
                        t.classList.remove('bg-green-600', 'text-white', 'shadow-md');
                        t.classList.add('text-gray-600', 'hover:text-green-700', 'hover:bg-gray-50');
                    });
                    this.classList.add('bg-green-600', 'text-white', 'shadow-md');
                    this.classList.remove('text-gray-600', 'hover:text-green-700', 'hover:bg-gray-50');

                    // Show target content
                    contents.forEach(c => {
                        if(c.id === 'gallery-' + target) {
                            c.classList.remove('hidden');
                            // Small animation reset
                            c.style.opacity = 0;
                            setTimeout(() => c.style.opacity = 1, 50);
                        } else {
                            c.classList.add('hidden');
                        }
                    });
                });
            });
        });
    </script>
    <style>
        .animate-fade-in {
            transition: opacity 0.5s ease-in-out;
        }
    </style>
</section>
